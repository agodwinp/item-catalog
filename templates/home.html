<!DOCTYPE html>
<html>
    <head>
        <title>Excellerate</title>
        <!--LOAD PRE-REQUISITES FOR GOOGLE SIGN IN -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="https://apis.google.com/js/platform.js?onload=start"> </script>
        <meta name="google-signin-client_id" content="169649741771-41dfhe2bc1kmjkfq1r97ir1b24cr9lqm.apps.googleusercontent.com">
        <script>
        gapi.load('auth2', function() {
        auth2 = gapi.auth2.init({
            client_id: '169649741771-41dfhe2bc1kmjkfq1r97ir1b24cr9lqm.apps.googleusercontent.com',
            // Scopes to request in addition to 'profile' and 'email'
            //scope: 'additional_scope'
        });
        });
        </script>
        <!-- END PRE-REQUISITES FOR GOOGLE SIGN IN -->
    </head>
    <body>
        <h1>Excellerate</h1>
        <h3>Take your sports equipment to the next level</h3>
        <a href = "{{url_for('showCatalog')}}">Enter</a>
        <div id="result"></div>
        <!--NEW GOOGLE SIGN IN BUTTON -->
        <div class="g-signin2" id="signinButton" data-onsuccess="onSignIn">Sign in with Google</div>
        <!-- Add where you want your sign-in button to render -->
        <!-- Use an image that follows the branding guidelines in a real app -->
        <script>
            $('#signinButton').click(function() {
                auth2.grantOfflineAccess({'redirect_uri': 'postmessage'}).then(signInCallback);
                });
        </script>
        </div>
        <!--END NEW GOOGLE BUTTON -->
        <!--NEW GOOGLE SIGN IN CODE -->
        <script>
            function signInCallback(json) {
            console.log('inside callback fuction');
            console.log(json);
            // authResult = JSON.parse(json);
            authResult = json;
            if (authResult['code']) {
                // Hide the sign-in button now that the user is authorized, for example:
                $('#signinButton').attr('style', 'display: none');
                $('#result').html('Welcome!');
                }
            }
        </script>
        <a href="#" onclick="signOut();">Sign out</a>
        <script>
          function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
              console.log('User signed out.');
            });
          }
        </script>
    </body>
</html>